<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lyra Admin Command Center</title>
    <style>
        body { background-color: #111; color: #0f0; font-family: monospace; }
        h1 { text-align: center; }
        .section { margin: 20px; padding: 10px; border: 1px solid #0f0; }
        textarea, input { width: 100%; background: #000; color: #0f0; border: 1px solid #0f0; }
        button { background: #0f0; color: #000; font-weight: bold; padding: 5px 10px; cursor: pointer; }
        #terminal-output { height: 200px; overflow-y: auto; background: #000; padding: 5px; }
    </style>
</head>
<body>

<h1>üõ°Ô∏è Lyra Admin Command Center</h1>

<!-- Admin Auth -->
<div class="section">
    <h3>Admin Login</h3>
    <input type="password" id="adminKey" placeholder="Enter admin key...">
    <button onclick="loginAdmin()">Login</button>
    <p id="loginStatus"></p>
</div>

<!-- Trigger Lyra Learning -->
<div class="section">
    <h3>üìö Trigger Lyra Learning</h3>
    <button onclick="triggerLearning()">Run Learning Protocols</button>
</div>

<!-- View Private Reports -->
<div class="section">
    <h3>üì© Fetch Private Daily Report</h3>
    <button onclick="fetchPrivateReport()">Get Report</button>
    <pre id="privateReport"></pre>
</div>

<!-- Terminal -->
<div class="section">
    <h3>üíª Remote Terminal</h3>
    <textarea id="terminalCommand" placeholder="Enter command..."></textarea>
    <button onclick="runTerminalCommand()">Run</button>
    <div id="terminal-output"></div>
</div>

<script>
const LYRA_API_URL = "http://localhost:5000";
let isAdmin = false;
let adminKey = "";

function loginAdmin() {
    const key = document.getElementById("adminKey").value;
    // Replace 'YOUR_SECRET_KEY' with your real key in environment variables
    if (key === "YOUR_SECRET_KEY") {
        isAdmin = true;
        adminKey = key;
        document.getElementById("loginStatus").innerText = "‚úÖ Access Granted";
    } else {
        document.getElementById("loginStatus").innerText = "‚ùå Access Denied";
    }
}

async function triggerLearning() {
    if (!isAdmin) return alert("Unauthorized");
    const res = await fetch(`${LYRA_API_URL}/learn`, {
        method: "POST",
        headers: { "Admin-Key": adminKey }
    });
    const data = await res.json();
    alert(data.status);
}

async function fetchPrivateReport() {
    if (!isAdmin) return alert("Unauthorized");
    const res = await fetch(`${LYRA_API_URL}/daily_report`, {
        headers: { "Admin-Key": adminKey }
    });
    const data = await res.json();
    document.getElementById("privateReport").innerText = data.report;
}

async function runTerminalCommand() {
    if (!isAdmin) return alert("Unauthorized");
    const cmd = document.getElementById("terminalCommand").value;
    const res = await fetch(`${LYRA_API_URL}/terminal`, {
        method: "POST",
        headers: { "Content-Type": "application/json", "Admin-Key": adminKey },
        body: JSON.stringify({ command: cmd })
    });
    const data = await res.json();
    document.getElementById("terminal-output").innerHTML += `<div>$ ${cmd}<br>${data.output}</div>`;
}
</script>

</body>
</html>
