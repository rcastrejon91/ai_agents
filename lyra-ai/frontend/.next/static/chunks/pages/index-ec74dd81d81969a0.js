(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5002)}])},5002:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n(5893),i=n(7294);function r(e){let{onResult:t}=e,[n,r]=(0,i.useState)(!1);return(0,s.jsx)("button",{type:"button",onClick:function(){let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){alert("Speech recognition not supported");return}let n=new e;n.onresult=e=>{let n=e.results[0][0].transcript;t&&t(n)},n.onend=()=>r(!1),n.start(),r(!0)},children:n?"Listening...":"\uD83C\uDFA4"})}function u(e){let{muted:t}=e,[n,u]=(0,i.useState)(""),[o,c]=(0,i.useState)([]);async function a(e){e.preventDefault();let s=n.trim();if(s){c(e=>[...e,{sender:"user",text:s}]),u("");try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})}),n=await e.json();if(c(e=>[...e,{sender:"lyra",text:n.reply}]),!t){let e=new SpeechSynthesisUtterance(n.reply);window.speechSynthesis.speak(e)}}catch(e){console.error("Chat error",e)}}}return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"chat-window",children:o.map((e,t)=>(0,s.jsx)("div",{className:e.sender,children:e.text},t))}),(0,s.jsxs)("form",{onSubmit:a,className:"chat-form",children:[(0,s.jsx)("input",{value:n,onChange:e=>u(e.target.value),placeholder:"Type your message"}),(0,s.jsx)("button",{type:"submit",children:"Send"}),(0,s.jsx)(r,{onResult:function(e){u(e)}})]})]})}function o(){return(0,s.jsx)("div",{className:"mode-bubble",children:"Mode: default"})}function c(e){let{muted:t,setMuted:n}=e;return(0,s.jsx)("button",{type:"button",onClick:()=>n(!t),children:t?"Unmute":"Mute"})}function a(){let[e,t]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(o,{}),(0,s.jsx)(u,{muted:e}),(0,s.jsx)(c,{muted:e,setMuted:t})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);